<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <title>Quiz</title>
</head>
<body class="flex">
    <nav class=" bg-white shadow-xl h-screen sticky top-0 left-0 min-w-[250px] py-6 px-4 font-[sans-serif] overflow-auto">
        <div class="relative flex flex-col h-full">
  
          <div class="flex flex-wrap items-center cursor-pointer relative">
  
            <div class="ml-4">
              <p class="text-sm text-[#333] font-semibold">Admin Panel</p>
            </div>
            
          </div>
  
          <hr class="my-6" />
  
          <div>
            <h4 class="text-sm text-gray-400 mb-4">Insights</h4>
            <ul class="space-y-4 px-2 flex-1">
              <li>
                <a  href="index.html" class="text-[#333] text-sm flex items-center hover:text-blue-600 transition-all">
                 
                  <span id="add_quiz_side" >Home</span>
                </a>
              </li>
              <li>
                <a onclick="showPage('addQuizPage')" href="#" class="text-[#333] text-sm flex items-center hover:text-blue-600 transition-all">
                 
                  <span id="add_quiz_side" >Add a Quiz</span>
                </a>
              </li>
              <li>
                <a onclick="showPage('activeInactivePage')" href="javascript:void(0)" class="text-[#333] text-sm flex items-center hover:text-blue-600 transition-all">
                  
                  <span id="active_inactive">Active/Inactive</span>
                </a>
              </li>
              <li>
                <a href="javascript:void(0)" class="text-[#333] text-sm flex items-center hover:text-blue-600 transition-all">
                 
                  <span id="statistic">Statistics</span>
                </a>
              </li>
            </ul>
          </div>
  
          <hr class="my-6" />
  
          
  
          <div class="mt-4">
            <ul class="space-y-4 px-2">
              <li>
                <a href="javascript:void(0)" class="text-[#333] text-sm flex items-center hover:text-blue-600 transition-all">
                  <svg xmlns="http://www.w3.org/2000/svg" l="currentColor" class="w-4 h-4 mr-4" viewBox="0 0 24 24">
                    <path d="M13.12 24h-2.24a1.498 1.498 0 0 1-1.486-1.32l-.239-1.876a9.45 9.45 0 0 1-1.374-.569l-1.494 1.161a1.492 1.492 0 0 1-1.985-.126l-1.575-1.575a1.488 1.488 0 0 1-.122-1.979l1.161-1.495a9.232 9.232 0 0 1-.569-1.374l-1.88-.239A1.501 1.501 0 0 1 0 13.12v-2.24c0-.757.567-1.396 1.32-1.486l1.876-.239a9.45 9.45 0 0 1 .569-1.374l-1.16-1.494a1.49 1.49 0 0 1 .127-1.986l1.575-1.575a1.489 1.489 0 0 1 1.979-.122L7.78 3.766a9.416 9.416 0 0 1 1.375-.569l.239-1.88C9.484.567 10.123 0 10.88 0h2.24c.757 0 1.396.567 1.486 1.32l.239 1.876c.478.155.938.346 1.375.569l1.494-1.161a1.49 1.49 0 0 1 1.985.127l1.575 1.575c.537.521.591 1.374.122 1.979L20.235 7.78c.224.437.415.897.569 1.374l1.88.239A1.5 1.5 0 0 1 24 10.88v2.24c0 .757-.567 1.396-1.32 1.486l-1.876.239a9.45 9.45 0 0 1-.569 1.374l1.161 1.494a1.49 1.49 0 0 1-.127 1.985l-1.575 1.575a1.487 1.487 0 0 1-1.979.122l-1.495-1.161a9.232 9.232 0 0 1-1.374.569l-.239 1.88A1.5 1.5 0 0 1 13.12 24zm-5.39-4.86c.083 0 .168.021.244.063a8.393 8.393 0 0 0 1.774.736.5.5 0 0 1 .358.417l.28 2.2c.03.251.247.444.494.444h2.24a.504.504 0 0 0 .493-.439l.281-2.204a.5.5 0 0 1 .358-.417 8.393 8.393 0 0 0 1.774-.736.499.499 0 0 1 .55.042l1.75 1.36a.492.492 0 0 0 .655-.034l1.585-1.585a.495.495 0 0 0 .039-.66l-1.36-1.75a.5.5 0 0 1-.042-.55 8.393 8.393 0 0 0 .736-1.774.5.5 0 0 1 .417-.358l2.2-.28A.507.507 0 0 0 23 13.12v-2.24a.504.504 0 0 0-.439-.493l-2.204-.281a.5.5 0 0 1-.417-.358 8.393 8.393 0 0 0-.736-1.774.497.497 0 0 1 .042-.55l1.36-1.75a.49.49 0 0 0-.033-.654l-1.585-1.585a.492.492 0 0 0-.66-.039l-1.75 1.36a.5.5 0 0 1-.551.042 8.359 8.359 0 0 0-1.774-.736.5.5 0 0 1-.358-.417l-.28-2.2A.507.507 0 0 0 13.12 1h-2.24a.504.504 0 0 0-.493.439l-.281 2.204a.502.502 0 0 1-.358.418 8.356 8.356 0 0 0-1.774.735.5.5 0 0 1-.551-.041l-1.75-1.36a.49.49 0 0 0-.654.033L3.434 5.014a.495.495 0 0 0-.039.66l1.36 1.75a.5.5 0 0 1 .042.55 8.341 8.341 0 0 0-.736 1.774.5.5 0 0 1-.417.358l-2.2.28A.505.505 0 0 0 1 10.88v2.24c0 .247.193.464.439.493l2.204.281a.5.5 0 0 1 .417.358c.18.626.428 1.223.736 1.774a.497.497 0 0 1-.042.55l-1.36 1.75a.49.49 0 0 0 .033.654l1.585 1.585a.494.494 0 0 0 .66.039l1.75-1.36a.515.515 0 0 1 .308-.104z" data-original="#000000" />
                    <path d="M12 17c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm0-9c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4z" data-original="#000000" />
                  </svg>
                  <span>Settings</span>
                </a>
              </li>
              <li>
                <a href="javascript:void(0)" class="text-[#333] text-sm flex items-center hover:text-blue-600 transition-all">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-4 h-4 mr-4"
                    viewBox="0 0 512 512">
                    <path
                      d="M437.02 74.98C388.668 26.63 324.379 0 256 0S123.332 26.629 74.98 74.98C26.63 123.332 0 187.621 0 256s26.629 132.668 74.98 181.02C123.332 485.37 187.621 512 256 512s132.668-26.629 181.02-74.98C485.37 388.668 512 324.379 512 256s-26.629-132.668-74.98-181.02zM111.105 429.297c8.454-72.735 70.989-128.89 144.895-128.89 38.96 0 75.598 15.179 103.156 42.734 23.281 23.285 37.965 53.687 41.742 86.152C361.641 462.172 311.094 482 256 482s-105.637-19.824-144.895-52.703zM256 269.507c-42.871 0-77.754-34.882-77.754-77.753C178.246 148.879 213.13 114 256 114s77.754 34.879 77.754 77.754c0 42.871-34.883 77.754-77.754 77.754zm170.719 134.427a175.9 175.9 0 0 0-46.352-82.004c-18.437-18.438-40.25-32.27-64.039-40.938 28.598-19.394 47.426-52.16 47.426-89.238C363.754 132.34 315.414 84 256 84s-107.754 48.34-107.754 107.754c0 37.098 18.844 69.875 47.465 89.266-21.887 7.976-42.14 20.308-59.566 36.542-25.235 23.5-42.758 53.465-50.883 86.348C50.852 364.242 30 312.512 30 256 30 131.383 131.383 30 256 30s226 101.383 226 226c0 56.523-20.86 108.266-55.281 147.934zm0 0"
                      data-original="#000000" />
                  </svg>
                  <span>Profile</span>
                </a>
              </li>
            </ul>
  
            </div>
          </div>
        </div>
      </nav>
    <div id="addQuizPage" class="addQuiz w-3/4 m-auto">
      <div class="max-w-3xl mx-auto p-6 bg-white rounded-lg shadow-md">
        <h2 class="text-2xl font-bold mb-6">Create a New Quiz</h2>

        <div id="quizNameContainer" class="mb-6">
            <label for="quizName" class="block text-sm font-medium text-gray-700 mb-1">Enter Quiz Name</label>
            <input type="text" id="quizName" name="quizName" placeholder="Enter quiz name here" class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none" required>
            <div  class="mt-4">
                <label class="block text-sm font-medium text-gray-700 mb-1" for="difficulty">Difficulty</label>
                <select id="difficulty" name="difficulty" class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                    <option value="easy">Easy</option>
                    <option value="medium">Medium</option>
                    <option value="hard">Hard</option>
                </select>
            </div>
            <div  class="mt-4">
              <label class="block text-sm font-medium text-gray-700 mb-1" for="status">Status</label>
              <select id="status" name="status" class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none">
                  <option value="active">active</option>
                  <option value="inactive">inactive</option>
              </select>
          </div>
            <button id="quizNameSubmit" class="mt-4 w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:outline-none" onclick="submitQuizName()">Submit Quiz Name</button>
        </div>

        <button id="startQuizButton" class="hidden w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:outline-none" onclick="startQuiz()">
            Start New Quiz
        </button>

        <div id="quizFormContainer" class="hidden mt-6">
            <h3 class="text-xl font-semibold mb-4">Add Quiz Question</h3>
            <form id="quizForm" class="space-y-6" onsubmit="return handleSubmit()">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="type">Question Type</label>
                    <select id="type" name="type" class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none" onchange="showFieldsBasedOnType()">
                        <option value="">Select question type</option>
                        <option value="mcq">Multiple Choice</option>
                        <option value="boolean">True/False</option>
                        <option value="text">Text Answer</option>
                    </select>
                </div>

                <div id="questionField" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="question">Question</label>
                    <input type="text" id="question" name="question" placeholder="Enter question here" class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none" required>
                </div>

                <div id="optionsField" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="options">Options (for MCQ only)</label>
                    <textarea id="options" name="options" placeholder="Enter options separated by commas, e.g., option1, option2" class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none"></textarea>
                </div>

                <div id="correctAnswerField" class="hidden">
                    <label class="block text-sm font-medium text-gray-700 mb-1" for="correctAnswer">Correct Answer</label>
                    <input type="text" id="correctAnswer" name="correctAnswer" placeholder="Enter correct answer" class="w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none" required>
                </div>
                <div id="explication" class="hidden">
                  <label class="block text-sm font-medium text-gray-700 mb-1" for="explication">Explication</label>
                  <input type="text" id="explication" name="explication" placeholder="Enter explication" class="explication w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-indigo-500 focus:outline-none" required>
              </div>

              

                <div>
                    <button type="submit" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:outline-none">Add Question</button>
                </div>
            </form>
        </div>

        <div id="addAnotherQuestionModal" class="hidden fixed inset-0 bg-gray-500 bg-opacity-75 flex justify-center items-center">
            <div class="bg-white p-6 rounded-md">
                <p class="text-lg">Do you want to add another question?</p>
                <div class="mt-4">
                    <button onclick="addAnotherQuestion()" class="bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700">Yes</button>
                    <button onclick="finishQuiz()" class="bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 ml-4">No</button>
                </div>
            </div>
        </div>

    </div>

    </div>
    
    <div id="activeInactivePage" class="cards absolute top-0 left-80 hidden w-3/4 m-auto ">
      <div class="w-full flex justify-center mt-10 mt-4 text-xl font-bold text-center text-gray-700 mb-10">
        <h1>manage quizzes</h1>
      </div>
      <table class="min-w-full divide-y divide-gray-200 ">
        <thead>
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quiz Name</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Question Number</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Complexity</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
            </tr>
        </thead>
        <tbody id="tbody" class="bg-white divide-y divide-gray-200">
            
            
        </tbody>
    </table>
    </div>
</div>  
  </body>
  <script src="admin.js"></script>
  <script>
    const add_side = document.getElementById("add_quiz_side");
    const active_inactive = document.getElementById("active_inactive");
    const statistic = document.getElementById("statistic");
    const admin = document.querySelector(".addQuiz");
    const cards = document.querySelector(".cards");
    const tbody = document.getElementById("tbody");
    add_side.addEventListener("click" ,()=>{
      admin.classList.remove("hidden");
      cards.classList.add("hidden");
    } );
    active_inactive.addEventListener("click",()=>{
      admin.classList.add("hidden");
      cards.classList.remove("hidden");
    })
  </script>
  <script>
    const quizzes = JSON.parse(localStorage.getItem("quizzes"));
    quizzes.forEach((quiz , index) => {
      
      tbody.innerHTML +=`<tr>
            <td class="px-6 py-4 whitespace-nowrap">${quiz.quizName}</td>
            <td class="px-6 py-4 whitespace-nowrap">${quiz.questions.length}</td>
            <td class="px-6 py-4 whitespace-nowrap">${quiz.complexity}</td>
            <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">${quiz.status}</span>
            </td>
            <td class="px-6 py-4 gap-x-3 whitespace-nowrap">
                
                                <select id="status" value="quiz.statut"  class="status bg-transparent py-2">
                                  <option value="select">Set status</option>
                                    <option value="active">active</option>
                                    <option value="inactive">inactive</option>
                                </select>
           
                <button  class="btndelete ml-2 px-4 py-2 font-medium text-white bg-red-600 rounded-md hover:bg-red-500 focus:outline-none focus:shadow-outline-red active:bg-red-600 transition duration-150 ease-in-out">Delete</button>
            </td>
        </tr>`;
      
    });
  document.querySelectorAll(".btndelete").forEach((button , index)=>{
    button.addEventListener("click" , ()=>{
      quizzes.splice(index , 1);
      localStorage.setItem("quizzes" , JSON.stringify(quizzes));
      window.location.reload();
      
    })



    document.querySelectorAll(".btnedit").forEach((button , index)=>{
      button.addEventListener("click" , ()=>{
      })
    })



    const status_dropdown = document.querySelectorAll(".status");

    status_dropdown.forEach((status , index2) =>{
      status.addEventListener("change" , ()=>{
        const status_value = status.value ;
    console.log(`the id ${index2} status is ${status_value}`);
    if(status_value === "active"){
      quizzes[index2].status = "active";
      localStorage.setItem("quizzes" , JSON.stringify(quizzes));
      window.location.reload();
    }else if(status_value === "inactive"){
      quizzes[index2].status = "inactive";
      localStorage.setItem("quizzes" , JSON.stringify(quizzes));
      window.location.reload();
    }

  })

  
    })
  
  })


  
   
    



  </script>
  <script>
    function showPage(pageId) {
    document.getElementById("addQuizPage").style.display = "none";
    document.getElementById("activeInactivePage").style.display = "none";

    document.getElementById(pageId).style.display = "block";

    localStorage.setItem("currentPage", pageId);
}

window.onload = function() {
    const savedPage = localStorage.getItem("currentPage");

    if (savedPage) {
        showPage(savedPage);
    } else {
        showPage("addQuizPage");
    }
};
  </script>
  </html>